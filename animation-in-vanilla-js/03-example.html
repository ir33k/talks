<meta charset="utf-8">

<div style="width:64px; height:64px; background:black"></div>

<script>
  /*
   * In this example we change value of `x` on each frame by value of
   * `xOffset` in range from 0 to `xMax`.  Then value of `x` is used to
   * set position of square element.
   */

  const element = document.querySelector('div')
  const fps = 60
  let lastTime = 0, xOffset = 10, x = 0, xMax = 500

  function animationLoop (timestamp) {
    if (timestamp - lastTime >= 1000 / fps) {
      lastTime = timestamp

      x = Math.max(0, Math.min(x + xOffset, xMax))

      if (x >= xMax || x <= 0) {
        xOffset *= -1
        console.timeEnd()
        console.time()
      }

      element.style.transform = `translateX(${x}px)`
    }

    window.requestAnimationFrame(animationLoop)
  }

  window.requestAnimationFrame(animationLoop)
</script>
