<meta charset="utf-8">
<div id="colorWheel" class="color-wheel">
  <div class="color-wheel__saturation"></div>
  <div id="colorWheelPointer" class="color-wheel__pointer"></div>
</div>
<input id="inputColor" type="color" value="ff0000">

<style>
  .color-wheel {
    --radius: 512px;
    --hue: 0;
    --saturation: 100%;
    --lightness: 50%;

    width:  var(--radius);
    height: var(--radius);

    position: relative;
    border-radius: 50%;
    background: conic-gradient(hsl(  0,var(--saturation),var(--lightness)),
                               hsl( 30,var(--saturation),var(--lightness)),
                               hsl( 60,var(--saturation),var(--lightness)),
                               hsl( 90,var(--saturation),var(--lightness)),
                               hsl(120,var(--saturation),var(--lightness)),
                               hsl(150,var(--saturation),var(--lightness)),
                               hsl(180,var(--saturation),var(--lightness)),
                               hsl(210,var(--saturation),var(--lightness)),
                               hsl(240,var(--saturation),var(--lightness)),
                               hsl(270,var(--saturation),var(--lightness)),
                               hsl(300,var(--saturation),var(--lightness)),
                               hsl(330,var(--saturation),var(--lightness)),
                               hsl(360,var(--saturation),var(--lightness)));
  }
  .color-wheel__saturation {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: radial-gradient(hsla(0,0%,var(--lightness),1) 10%,  /* <-- control how far from center white color should start */
                                hsla(0,0%,var(--lightness),0) 85%); /* <-- control how close to the edge white gradient should end */
  }
  .color-wheel__pointer {
    position: absolute;
    width:  20px;
    height: 20px;
    border-radius: 50%;
    border: 4px solid white;
    box-shadow: 0 2px 5px #00000055;
    top: -12px;
    left: -12px;
    pointer-events: none;
  }
</style>

<script>
  const toRGB = (hsl) => { // [h,s,l] s and l must be fraction of 1
    const [h, s, l] = hsl // [hue, saturation, lightness]
    // By default we assume that saturation (s) is equal to 0.  That gives
    // achromatic color so all colors have the same value taken from
    // lightness (l), only in other case we do all that crazy calculations.
    let r = g = b = l

    if (s !== 0) {
      const c = (1 - Math.abs(2 * l - 1)) * s
      const x = c * (1 - Math.abs((h / 60) % 2 - 1))
      const m = l - c/2

      /**/ if (h <  60) { r = c; g = x; b = 0 }
      else if (h < 120) { r = x; g = c; b = 0 }
      else if (h < 180) { r = 0; g = c; b = x }
      else if (h < 240) { r = 0; g = x; b = c }
      else if (h < 300) { r = x; g = 0; b = c }
      else if (h < 360) { r = c; g = 0; b = x }

      r+=m; g+=m; b+=m
    }

    return [Math.round(r*255), Math.round(g*255), Math.round(b*255)]
  }

  const toHex = (rgb) => '#' +
    rgb[0].toString(16).padStart(2, '0') +
    rgb[1].toString(16).padStart(2, '0') +
    rgb[2].toString(16).padStart(2, '0')

  const { width, height, x, y } = colorWheel.getBoundingClientRect()
  const radius = Math.min(width, height) / 2

  const onPointer = (event) => {
    // point x,y values relative to container
    const px = event.x - x
    const py = event.y - y

    // x,y values Relative to center
    const rx = px - width / 2
    const ry = py - height / 2

    // x,y,z ege sizes of triangle
    const tx = Math.abs(rx)
    const ty = Math.abs(ry)
    const tz = Math.hypot(tx, ty)
    const tzMax = Math.min(tz, radius - 10)

    let hue = 0
    /**/ if (rx >= 0 && ry <= 0) hue += Math.atan2(tx, ty) * 180 / Math.PI       // top right quarter   
    else if (rx >= 0 && ry >= 0) hue += Math.atan2(ty, tx) * 180 / Math.PI + 90  // bottom right quarter
    else if (rx <= 0 && ry >= 0) hue += Math.atan2(tx, ty) * 180 / Math.PI + 180 // bottom left quarter 
    else if (rx <= 0 && ry <= 0) hue += Math.atan2(ty, tx) * 180 / Math.PI + 270 // top left quarter

    const colorRGB = toRGB([hue, Math.min(1, tz/radius), 0.5])
    const colorHex = toHex(colorRGB)

    // Set pointer position and background color
    colorWheelPointer.style.transform = `translate(${px}px,${py}px)`
    colorWheelPointer.style.backgroundColor = colorHex

    // Set input (of type color) value
    inputColor.value = colorHex
  }

  colorWheel.addEventListener('pointerdown', (event) => {
    onPointer(event)
    window.addEventListener('pointermove', onPointer)
  })

  window.addEventListener('pointerup',     () => window.removeEventListener('pointermove', onPointer))
  window.addEventListener('pointercancel', () => window.removeEventListener('pointermove', onPointer))
  window.addEventListener('pointerleave',  () => window.removeEventListener('pointermove', onPointer))
</script>